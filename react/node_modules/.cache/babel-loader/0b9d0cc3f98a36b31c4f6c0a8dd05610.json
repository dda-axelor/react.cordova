{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\or\\\\Desktop\\\\maot_hahahim\\\\code\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\or\\\\Desktop\\\\maot_hahahim\\\\code\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\or\\\\Desktop\\\\maot_hahahim\\\\code\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\or\\\\Desktop\\\\maot_hahahim\\\\code\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\or\\\\Desktop\\\\maot_hahahim\\\\code\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\or\\\\Desktop\\\\maot_hahahim\\\\code\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\or\\\\Desktop\\\\maot_hahahim\\\\code\\\\src\\\\player.js\";\nimport React from 'react';\nimport $ from 'jquery';\nvar interval = null;\n\nvar Player =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Player, _React$Component);\n\n  function Player(props) {\n    var _this;\n\n    _classCallCheck(this, Player);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Player).call(this, props));\n    _this.state = {\n      playerPlay: false,\n      playerItem: null,\n      playerTime: 0 //ms\n      ,\n      playerLoaded: false,\n      playerSeekingTouchDown: false,\n      playerSeekingPosition: 0,\n      playerMusicControls: false,\n      intervalTryFixError: false,\n      playerHistory: localStorage.getItem(\"playerHistory\") !== null ? JSON.parse(localStorage.getItem(\"playerHistory\")) : false\n    };\n    localStorage.removeItem(\"playerHistory\");\n    _this.playerTouchStartPosition = 0;\n    _this.playerTouchStartMove = false;\n    _this.media = null;\n    _this.MusicControls = null;\n    _this.myApp = _this.props.myApp;\n\n    _this.myApp.setState({\n      player: _assertThisInitialized(_assertThisInitialized(_this))\n    });\n\n    return _this;\n  } // componentDidUpdate() {\n  //     this.props.myApp.setState({ player: this });\n  // }\n\n\n  _createClass(Player, [{\n    key: \"playerPlayNew\",\n    value: function playerPlayNew(playItem) {\n      var fthis = this;\n      this.setState({\n        playerLoaded: false,\n        playerPlay: false,\n        playerError: false,\n        onErrorTryAgain: 0,\n        playerWaitingToPlay: false //, playerPlay: true\n        ,\n        playerTime: 0,\n        playerItem: playItem,\n        playerMusicControls: true\n      });\n      fthis.props.myApp.setState({\n        playerOpen: true\n      }); //---create MusicControls Notifction\n\n      window.MusicControls.create({\n        track: playItem.show_name,\n        // optional, default : ''\n        artist: playItem.isLive ? \"\" : playItem.broadcaster,\n        // optional, default : ''\n        album: playItem.isLive ? \"\" : playItem.parent_program_name,\n        // optional, default: ''\n        cover: playItem.isLive ? \"http://clients-vm.cyberserve.co.il/eol/logo.png\" : playItem.show_image,\n        // optional, default : nothing\n        // cover can be a local path (use fullpath 'file:///storage/emulated/...', or only 'my_image.jpg' if my_image.jpg is in the www folder of your app)\n        //\t\t\t or a remote url ('http://...', 'https://...', 'ftp://...')\n        isPlaying: false,\n        // optional, default : true\n        // dismissable: true,\t\t\t\t\t\t\t// optional, default : false\n        // hide previous/next/close buttons:\n        hasPrev: false,\n        // show previous button, optional, default: true\n        hasNext: false,\n        // show next button, optional, default: true\n        hasClose: true,\n        // show close button, optional, default: false\n        // iOS only, optional\n        //  duration: playItem.isLive ? 9999 : playItem.show_length, // optional, default: 0\n        // elapsed: 10, // optional, default: 0\n        //hasSkipForward: true, //optional, default: false. true value overrides hasNext.\n        //hasSkipBackward: true, //optional, default: false. true value overrides hasPrev.\n        //skipForwardInterval: 15, //optional. default: 0.\n        //skipBackwardInterval: 15, //optional. default: 0.\n        hasScrubbing: true,\n        //optional. default to false. Enable scrubbing from control center progress bar \n        // Android only, optional\n        // text displayed in the status bar when the notification (and the ticker) are updated\n        ticker: 'Now playing \"' + playItem.show_name + '\"',\n        //All icons default to their built-in android equivalents\n        //The supplied drawable name, e.g. 'media_play', is the name of a drawable found under android/res/drawable* folders\n        playIcon: \"http://clients-vm.cyberserve.co.il/eol/ic_play_blue.png\",\n        //\"ic_play_blue.svg\",\n        pauseIcon: \"http://clients-vm.cyberserve.co.il/eol/ic_pause_blue.png\",\n        //\"ic_pause_blue.svg\",\n        prevIcon: '',\n        //'media_prev',\n        nextIcon: '',\n        //'media_next',\n        closeIcon: 'media_close',\n        notificationIcon: 'logo_radio_turkiz.svg'\n      }, function (s) {\n        return console.log(\"MusicControlsNotif onSuccess: \", s);\n      }, function (e) {\n        return console.log(\"MusicControlsNotif onError: \", e);\n      }); //---end create MusicControls Notifction\n\n      window.MusicControls.updateDismissable(false); // Register callback MusicControls\n\n      window.MusicControls.subscribe(function (action) {\n        console.log('98 callback MusicControls: ', action);\n\n        switch (JSON.parse(action).message) {\n          case 'music-controls-next':\n            // Do something\n            break;\n\n          case 'music-controls-previous':\n            // Do something\n            break;\n\n          case 'music-controls-pause':\n            {\n              fthis.state.playerLoaded ? window.media.pause() : console.log('המתן לסיום הטעינה');\n              break;\n            }\n\n          case 'music-controls-media-button-play-pause':\n            {\n              fthis.state.playerLoaded ? fthis.state.playerPlay ? window.media.pause() : window.media.play() : console.log('המתן לסיום הטעינה');\n              break;\n            }\n\n          case 'music-controls-toggle-play-pause':\n            {\n              fthis.state.playerLoaded ? window.media.pause() : console.log('המתן לסיום הטעינה');\n              break;\n            }\n\n          case 'music-controls-play':\n            {\n              fthis.state.playerLoaded ? window.media.play() : console.log('המתן לסיום הטעינה');\n              break;\n            }\n\n          case 'music-controls-media-button-previous':\n            fthis.setState({\n              playerTime: 0\n            });\n            break;\n\n          case 'music-controls-media-button-next':\n            fthis.setState({\n              playerTime: fthis.state.playerTime + 10000\n            });\n            break;\n\n          case 'music-controls-destroy':\n            console.log(\"145 music-controls-destroy in and start \");\n            fthis.setState({\n              playerPlay: false,\n              playerLoaded: true,\n              playerTime: 0,\n              playerOpen: false // , playerMusicControls: false\n              // , playerHistory: false\n\n            });\n            fthis.props.myApp.setState({\n              playerOpen: false\n            });\n            window.MusicControls.destroy(function () {\n              console.log('155 MusicControls destroy:  ');\n\n              if (fthis.state.playerLoaded) {\n                if (fthis.state.playerMusicControls) {\n                  fthis.setState({\n                    playerMusicControls: false\n                  });\n                  playItem.isLive ? window.media.pause() : window.media.stop();\n                }\n              }\n            }, function (e) {\n              console.log('destry onError: ', e);\n            }); //  }\n\n            break;\n          // // External controls (iOS only)\n          // case 'music-controls-toggle-play-pause':\n          //   // Do something\n          //   break;\n\n          case 'music-controls-seek-to':\n            var seekToInSeconds = JSON.parse(action).position;\n            window.MusicControls.updateElapsed({\n              elapsed: seekToInSeconds,\n              isPlaying: true\n            });\n            fthis.setState({\n              playerTime: seekToInSeconds * 1000\n            });\n            break;\n          // Headset events (Android only)\n          // All media button events are listed below\n\n          case 'music-controls-media-button':\n            // Do something\n            break;\n\n          case 'music-controls-headset-unplugged':\n            // Do something\n            break;\n\n          case 'music-controls-headset-plugged':\n            // Do something\n            break;\n\n          case 'music-controls-stop-listening':\n            // console.log('music-controls-stop-listening start');\n            //  localStorage.removeItem(\"playerHistory\");\n            // fthis.setState({\n            //   playerPlay: false\n            //   , playerLoaded: true\n            //   , playerTime: 0\n            //   // , playerOpen: false\n            // });\n            //   console.log('music-controls-stop-listening End');\n            break;\n\n          default:\n            break;\n        }\n      }); // Start listening for events\n      // The plugin will run the events function each time an event is fired\n\n      window.MusicControls.listen();\n      fthis.MusicControls = window.MusicControls;\n      fthis.beforCreateNewMedia(playItem);\n    } // playerPlayExists() {\n    //   window.media.play();\n    // }\n    // playerPause() {\n    // window.media.pause();\n    // }\n    // playerStop() {\n    // window.media.stop();\n    // }\n\n  }, {\n    key: \"beforCreateNewMedia\",\n    value: function beforCreateNewMedia(playItem) {\n      var fthis = this;\n      fthis.setState({\n        playerWaitingToPlay: true\n      });\n\n      if (window.media !== undefined) {\n        if (playItem.isLive) {\n          console.log(\"isLive\"); // fthis.setState({ playerMusicControls: false });\n          // fthis.MusicControls.destroy();\n\n          window.media.pause();\n          window.media.release();\n          window.media.play();\n        } else {\n          console.log(\"!isLive\");\n          window.media.stop();\n          window.media.src = playItem.show_clip_id_full_url;\n          window.media.play();\n        } // window.media = undefined;\n        // console.log('window.media !== undefined')\n        // clearInterval(interval);\n        // //   async function() {\n        // // window.media.stop();\n        // console.log('release wiil start');\n        //  window.media.release();\n        // console.log('play will start');\n        // //   }\n\n      } else fthis.createNewMedia(playItem);\n    }\n  }, {\n    key: \"createNewMedia\",\n    value: function createNewMedia(playItem) {\n      var fthis = this;\n      console.log(\"new window.Media\");\n      window.media = new window.Media(playItem.show_clip_id_full_url, function () {\n        console.log('234 mediaSuccess'); // if (fthis.state.playerHistory !== false) {\n        //   fthis.setState({\n        //     playItem:fthis.state.playerHistory.item\n        //     ,playerTime: fthis.state.playerHistory.time\n        //   });\n        // }\n      }, function (mediaError) {\n        // console.log(\"string\" + (mediaError.code === \"-2147483648\"));\n        // console.log(\"int\" + (mediaError.code === -2147483648));\n        // if (mediaError.code !== -2147483648) {\n        clearInterval(interval);\n        localStorage.removeItem(\"playerHistory\");\n        if (fthis.state.playerMusicControls) window.MusicControls.updateIsPlaying(false);\n        console.log('242 mediaError:' + JSON.stringify(mediaError)); // }\n\n        fthis.setState({\n          intervalTryFixError: setInterval(function () {\n            if (fthis.state.onErrorTryAgain <= 4) {\n              fthis.setState({\n                playerError: false,\n                playerLoaded: false,\n                onErrorTryAgain: fthis.state.onErrorTryAgain + 1\n              });\n              window.media.release();\n              window.media.play();\n            } else {\n              clearInterval(fthis.state.intervalTryFixError);\n              fthis.setState({\n                playerError: true,\n                playerLoaded: true\n              });\n            }\n          }, 1000)\n        });\n      }, function (mediaStatus) {\n        console.log('244 mediaStatus:' + JSON.stringify(mediaStatus));\n\n        if (mediaStatus === 4) //stop\n          {\n            window.media.release();\n            console.log('248 start media.stop (option 4)');\n            clearInterval(interval); //  localStorage.removeItem(\"playerHistory\");\n\n            if (fthis.state.playerMusicControls) {\n              fthis.setState({\n                playerMusicControls: false\n              });\n              fthis.MusicControls.destroy(); // window.MusicControls.updateIsPlaying(false);\n            } // if (!fthis.state.playerItem.isLive) {\n            //     localStorage.setItem(\"playerHistory\",\n            //         JSON.stringify({\n            //             item: fthis.state.playerItem\n            //             , time: fthis.state.playerTime\n            //         })\n            //     );\n            // } else {\n            //     //  console.log(\"(else)==> in if palyerTime > show_length.\");\n            //     localStorage.removeItem(\"playerHistory\");\n            //     // fthis.setState({\n            //     //   playerPlay: false\n            //     //   , playerLoaded: true\n            //     //   , playerTime: 0\n            //     //   , playerOpen: false\n            //     // });\n            // }\n\n          } else if (mediaStatus === 3) {\n          //pause\n          // $('.player_button').css('-webkit-animation', '');\n          // $('.player_button').css('animation', '');\n          fthis.setState({\n            playerPlay: false,\n            playerLoaded: true,\n            playerError: false\n          });\n          clearInterval(interval);\n          localStorage.removeItem(\"playerHistory\");\n          if (fthis.state.playerMusicControls) window.MusicControls.updateIsPlaying(false);\n        } else if (mediaStatus === 2) {\n          //play\n          // $('.player_button').css('-webkit-animation', '');\n          // $('.player_button').css('animation', '');\n          if (fthis.state.intervalTryFixError) {\n            clearInterval(fthis.state.intervalTryFixError);\n            fthis.setState({\n              playerError: false,\n              playerLoaded: true,\n              intervalTryFixError: false\n            });\n          }\n\n          fthis.setState({\n            playerPlay: true,\n            playerLoaded: true,\n            playerError: false\n          });\n          fthis.setIntervalTimePlayer();\n          fthis.setState({\n            playerMusicControls: true\n          });\n\n          if (fthis.state.playerMusicControls) {\n            //  console.log(\"fthis.state.playerMusicControls===true\");\n            window.MusicControls.updateIsPlaying(true);\n          } //else console.log(\"fthis.state.playerMusicControls===false\");\n\n        } else if (mediaStatus === 1) {\n          if (fthis.state.playerWaitingToPlay) {\n            window.media.play();\n            fthis.setState({\n              playerWaitingToPlay: false\n            });\n          } // fthis.setState({\n          //     playerLoaded: true\n          //     , playerError: false\n          // });\n\n        }\n      }); //}\n\n      fthis.media = window.media;\n\n      if (fthis.state.playerHistory !== false) {\n        window.media.seekTo(fthis.state.playerHistory.time); // $('.player_button').css('-webkit-animation', '');\n        // $('.player_button').css('animation', '');\n\n        fthis.setState({\n          playItem: fthis.state.playerHistory.item,\n          playerTime: fthis.state.playerHistory.time,\n          playerPlay: false,\n          playerLoaded: true,\n          playerError: false,\n          playerMusicControls: true\n        });\n        fthis.setState({\n          playerHistory: false\n        }); //  window.media.pause();\n      } else {\n        window.media.play();\n      }\n    }\n  }, {\n    key: \"playerTouchEnd\",\n    value: function playerTouchEnd() {\n      this.setState({\n        playerSeekingTouchDown: false\n      });\n      console.log('onTouchEnd');\n\n      if (!this.playerTouchStartMove) {\n        var newPositionPercent = (this.playerTouchStartPosition - $($('.player_seeking_bar')).offset().left) / parseInt($('.player_seeking_bar').css('width').substring(0, $('.player_seeking_bar').css('width').indexOf(\"px\")));\n        var show_length = (parseFloat(this.state.playerItem.show_length.substring(0, 2)) * 60 * 60 + (parseFloat(this.state.playerItem.show_length.substring(3, 5) * 60) + parseFloat(this.state.playerItem.show_length.substring(6, 9)))) * 1000;\n        var newTime = show_length * newPositionPercent;\n\n        if (newTime <= show_length && newTime >= 0) {\n          this.setState({\n            playerTime: newTime\n          });\n        }\n      }\n\n      this.playerTouchStartMove = false;\n      window.media.seekTo(this.state.playerTime); // const newPositionPercent = Math.round(($('.player_seeking_bul')[0].offsetLeft) / (parseInt($('.player_info_group').css('width').substring(0, $('.player_info_group').css('width').indexOf(\"px\")))) * 100);\n      // this.setState({\n      //   playerTime: (\n      //     (parseFloat(this.state.playerItem.show_length.substring(0, 2)) * 60 * 60)\n      //     + (parseFloat(this.state.playerItem.show_length.substring(3, 5) * 60)\n      //       + parseFloat(this.state.playerItem.show_length.substring(6, 9)))\n      //   ) * (newPositionPercent / 100)\n      // });\n    }\n  }, {\n    key: \"playerTouchMove\",\n    value: function playerTouchMove(event) {\n      this.playerTouchStartMove = true;\n      var newPositionPercent = (event.touches[0].clientX - this.playerTouchStartPosition) / parseInt($('.player_info_group').css('width').substring(0, $('.player_info_group').css('width').indexOf(\"px\"))); // console.log('x:', event.touches[0].clientX, ' y:', event.touches[0].clientY)\n\n      var show_length = (parseFloat(this.state.playerItem.show_length.substring(0, 2)) * 60 * 60 + (parseFloat(this.state.playerItem.show_length.substring(3, 5) * 60) + parseFloat(this.state.playerItem.show_length.substring(6, 9)))) * 1000;\n      var newTime = show_length * newPositionPercent + this.state.playerTime;\n\n      if (newTime <= show_length && newTime >= 0) {\n        this.setState({\n          playerTime: newTime\n        });\n        this.playerTouchStartPosition = event.touches[0].clientX;\n      } else {\n        if (newTime >= show_length) {\n          this.setState({\n            playerTime: show_length - 1000\n          });\n        } else {\n          this.setState({\n            playerTime: 1000\n          });\n        }\n      }\n    }\n  }, {\n    key: \"setIntervalTimePlayer\",\n    value: function setIntervalTimePlayer() {\n      // debugger\n      var fthis = this;\n      interval = setInterval(function () {\n        if (!fthis.state.playerItem.isLive) {\n          if (fthis.state.playerTime / 1000 <= parseFloat(fthis.state.playerItem.show_length.substring(0, 2)) * 60 * 60 + (parseFloat(fthis.state.playerItem.show_length.substring(3, 5) * 60) + parseFloat(fthis.state.playerItem.show_length.substring(6, 9)))) {\n            localStorage.setItem(\"playerHistory\", JSON.stringify({\n              item: fthis.state.playerItem,\n              time: fthis.state.playerTime\n            }));\n            fthis.setState({\n              playerTime: fthis.state.playerTime + 100\n            });\n          } else {\n            clearInterval(interval);\n            localStorage.removeItem(\"playerHistory\"); //window.media.pause();\n            //window.media.stop();\n            //הקטע הסתיים\n\n            console.log('updateIsPlaying=>false from setIntervalTimePlayer (else)');\n            window.MusicControls.updateIsPlaying(false);\n          }\n        }\n      }, 100);\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      // const fthis = this;\n      if (this.state.playerHistory !== false) {\n        this.playerPlayNew(this.state.playerHistory.item);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var fthis = this;\n      var bottom_Height = this.props.bottom_Height; // if(fthis.state.playerError){\n      //     window.media.release();\n      //     window.media.play();\n      // }\n\n      return (//* //--footer player--// */\n        fthis.state.playerItem !== null ? React.createElement(\"div\", {\n          key: \"player_section\",\n          className: \"player_section\",\n          style: {\n            height: bottom_Height + \"px\",\n            display: fthis.myApp.state.playerOpen ? \"flex\" : \"none\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 530\n          },\n          __self: this\n        }, !fthis.state.playerItem.isLive ? React.createElement(\"div\", {\n          className: \"player_info_group\",\n          onTouchMove: function onTouchMove(event) {\n            return fthis.playerTouchMove(event);\n          },\n          onTouchEnd: function onTouchEnd(event) {\n            fthis.playerTouchEnd();\n          },\n          onTouchStart: function onTouchStart(event) {\n            fthis.playerTouchStartPosition = event.touches[0].clientX;\n            fthis.setState({\n              playerSeekingTouchDown: true\n            });\n            console.log('onTouchStart');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 532\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 535\n          },\n          __self: this\n        }, fthis.state.playerItem.show_name), React.createElement(\"div\", {\n          className: \"player_seeking_bar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 536\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"player_seeking_line\",\n          style: {\n            width: (fthis.state.playerTime / 1000 / (parseFloat(fthis.state.playerItem.show_length.substring(0, 2)) * 60 * 60 + (parseFloat(fthis.state.playerItem.show_length.substring(3, 5) * 60) + parseFloat(fthis.state.playerItem.show_length.substring(6, 9)))) * 100).toString() + \"%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 537\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"player_seeking_bul\" // onTouchMove={(event) => fthis.playerTouchMove(event)}\n          // onTouchStart={(event) => { fthis.playerTouchStartPosition = event.touches[0].clientX; fthis.setState({ playerSeekingTouchDown: true }); console.log('onTouchStart'); }}\n          // onTouchEnd={() => { fthis.playerTouchEnd(); }}\n          ,\n          style: {\n            marginLeft: (fthis.state.playerTime / 1000 / (parseFloat(fthis.state.playerItem.show_length.substring(0, 2)) * 60 * 60 + (parseFloat(fthis.state.playerItem.show_length.substring(3, 5) * 60) + parseFloat(fthis.state.playerItem.show_length.substring(6, 9)))) * 100).toString() + \"%\",\n            width: fthis.state.playerSeekingTouchDown ? '7.0vw' : '2.8vw',\n            height: fthis.state.playerSeekingTouchDown ? '7.0vw' : '2.8vw'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 544\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 558\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            display: \"inline-block\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 559\n          },\n          __self: this\n        }, (Math.floor(fthis.state.playerTime / (60 * 60 * 1000) % 60) <= 9 ? \"0\" + Math.floor(fthis.state.playerTime / (60 * 60 * 1000) % 60).toString() : Math.floor(fthis.state.playerTime / (60 * 60 * 1000) % 60).toString()) + \":\" + (Math.floor(fthis.state.playerTime / (60 * 1000) % 60) <= 9 ? \"0\" + Math.floor(fthis.state.playerTime / (60 * 1000) % 60).toString() : Math.floor(fthis.state.playerTime / (60 * 1000) % 60).toString()) + \":\" + (Math.floor(fthis.state.playerTime / 1000 % 60) <= 9 ? \"0\" + Math.floor(fthis.state.playerTime / 1000 % 60).toString() : Math.floor(fthis.state.playerTime / 1000 % 60).toString())), React.createElement(\"div\", {\n          style: {\n            display: \"inline-block\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 575\n          },\n          __self: this\n        }, \"/\"), React.createElement(\"div\", {\n          style: {\n            display: \"inline-block\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 576\n          },\n          __self: this\n        }, fthis.state.playerItem.show_length))) : React.createElement(\"div\", {\n          className: \"player_info_group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 580\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 580\n          },\n          __self: this\n        }, fthis.state.playerItem.show_name)), React.createElement(\"div\", {\n          onClick: function onClick() {\n            if (fthis.state.playerError) {\n              window.media.release();\n              window.media.play();\n            } else if (fthis.state.playerLoaded) {\n              fthis.state.playerPlay ? window.media.pause() : window.media.play();\n            }\n          },\n          style: fthis.state.playerLoaded ? {\n            '-webkit-animation': '',\n            'animation': ''\n          } : {\n            '-webkit-animation': 'spin 2s linear infinite',\n            'animation': 'spin 2s linear infinite;'\n          },\n          className: fthis.state.playerPlay ? \"player_button pause w-inline-block\" : \"player_button w-inline-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 582\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: fthis.state.playerError ? \"./images/warning-sign.png\" : fthis.state.playerPlay ? \"./images/ic_pause_blue.svg\" : \"./images/ic_play_blue.svg\",\n          alt: fthis.state.playerPlay ? \"puse Player\" : \"play Player\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 602\n          },\n          __self: this\n        }))) : null\n      );\n    }\n  }]);\n\n  return Player;\n}(React.Component);\n\nexport { Player as default };","map":{"version":3,"sources":["C:\\Users\\or\\Desktop\\maot_hahahim\\code\\src\\player.js"],"names":["React","$","interval","Player","props","state","playerPlay","playerItem","playerTime","playerLoaded","playerSeekingTouchDown","playerSeekingPosition","playerMusicControls","intervalTryFixError","playerHistory","localStorage","getItem","JSON","parse","removeItem","playerTouchStartPosition","playerTouchStartMove","media","MusicControls","myApp","setState","player","playItem","fthis","playerError","onErrorTryAgain","playerWaitingToPlay","playerOpen","window","create","track","show_name","artist","isLive","broadcaster","album","parent_program_name","cover","show_image","isPlaying","hasPrev","hasNext","hasClose","hasScrubbing","ticker","playIcon","pauseIcon","prevIcon","nextIcon","closeIcon","notificationIcon","s","console","log","e","updateDismissable","subscribe","action","message","pause","play","destroy","stop","seekToInSeconds","position","updateElapsed","elapsed","listen","beforCreateNewMedia","undefined","release","src","show_clip_id_full_url","createNewMedia","Media","mediaError","clearInterval","updateIsPlaying","stringify","setInterval","mediaStatus","setIntervalTimePlayer","seekTo","time","item","newPositionPercent","offset","left","parseInt","css","substring","indexOf","show_length","parseFloat","newTime","event","touches","clientX","setItem","playerPlayNew","bottom_Height","height","display","playerTouchMove","playerTouchEnd","width","toString","marginLeft","Math","floor","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport $ from 'jquery';\r\n\r\nlet interval = null;\r\n\r\nexport default class Player extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            playerPlay: false\r\n            , playerItem: null\r\n            , playerTime: 0//ms\r\n            , playerLoaded: false\r\n            , playerSeekingTouchDown: false\r\n            , playerSeekingPosition: 0\r\n            , playerMusicControls: false\r\n            , intervalTryFixError: false\r\n            , playerHistory: localStorage.getItem(\"playerHistory\") !== null ? JSON.parse(localStorage.getItem(\"playerHistory\")) : false\r\n        }\r\n\r\n        localStorage.removeItem(\"playerHistory\");\r\n\r\n        this.playerTouchStartPosition = 0;\r\n        this.playerTouchStartMove = false;\r\n\r\n        this.media = null;\r\n        this.MusicControls = null;\r\n\r\n        this.myApp = this.props.myApp;\r\n        this.myApp.setState({ player: this });\r\n\r\n    }\r\n\r\n    // componentDidUpdate() {\r\n    //     this.props.myApp.setState({ player: this });\r\n    // }\r\n\r\n    playerPlayNew(playItem) {\r\n        let fthis = this;\r\n\r\n        this.setState({\r\n            playerLoaded: false\r\n            , playerPlay: false\r\n            , playerError: false\r\n            , onErrorTryAgain: 0\r\n            , playerWaitingToPlay: false\r\n            //, playerPlay: true\r\n            , playerTime: 0\r\n            , playerItem: playItem\r\n            , playerMusicControls: true\r\n        });\r\n        fthis.props.myApp.setState({ playerOpen: true });\r\n        //---create MusicControls Notifction\r\n        window.MusicControls.create({\r\n            track: playItem.show_name,\t\t// optional, default : ''\r\n            artist: playItem.isLive ? \"\" : playItem.broadcaster,\t\t\t\t\t\t// optional, default : ''\r\n            album: playItem.isLive ? \"\" : playItem.parent_program_name,     // optional, default: ''\r\n            cover: playItem.isLive ? \"http://clients-vm.cyberserve.co.il/eol/logo.png\" : playItem.show_image,\t\t// optional, default : nothing\r\n            // cover can be a local path (use fullpath 'file:///storage/emulated/...', or only 'my_image.jpg' if my_image.jpg is in the www folder of your app)\r\n            //\t\t\t or a remote url ('http://...', 'https://...', 'ftp://...')\r\n            isPlaying: false,\t\t\t\t\t// optional, default : true\r\n            // dismissable: true,\t\t\t\t\t\t\t// optional, default : false\r\n\r\n            // hide previous/next/close buttons:\r\n            hasPrev: false,\t\t// show previous button, optional, default: true\r\n            hasNext: false,\t\t// show next button, optional, default: true\r\n            hasClose: true,\t\t// show close button, optional, default: false\r\n\r\n            // iOS only, optional\r\n\r\n            //  duration: playItem.isLive ? 9999 : playItem.show_length, // optional, default: 0\r\n            // elapsed: 10, // optional, default: 0\r\n            //hasSkipForward: true, //optional, default: false. true value overrides hasNext.\r\n            //hasSkipBackward: true, //optional, default: false. true value overrides hasPrev.\r\n            //skipForwardInterval: 15, //optional. default: 0.\r\n            //skipBackwardInterval: 15, //optional. default: 0.\r\n            hasScrubbing: true, //optional. default to false. Enable scrubbing from control center progress bar \r\n\r\n            // Android only, optional\r\n            // text displayed in the status bar when the notification (and the ticker) are updated\r\n            ticker: 'Now playing \"' + playItem.show_name + '\"',\r\n            //All icons default to their built-in android equivalents\r\n            //The supplied drawable name, e.g. 'media_play', is the name of a drawable found under android/res/drawable* folders\r\n            playIcon: \"http://clients-vm.cyberserve.co.il/eol/ic_play_blue.png\",//\"ic_play_blue.svg\",\r\n            pauseIcon: \"http://clients-vm.cyberserve.co.il/eol/ic_pause_blue.png\",//\"ic_pause_blue.svg\",\r\n            prevIcon: '',//'media_prev',\r\n            nextIcon: '',//'media_next',\r\n            closeIcon: 'media_close',\r\n            notificationIcon: 'logo_radio_turkiz.svg'\r\n        }, (s) => console.log(\"MusicControlsNotif onSuccess: \", s), (e) => console.log(\"MusicControlsNotif onError: \", e));\r\n        //---end create MusicControls Notifction\r\n\r\n        window.MusicControls.updateDismissable(false);\r\n\r\n        // Register callback MusicControls\r\n        window.MusicControls.subscribe((action) => {\r\n            console.log('98 callback MusicControls: ', action);\r\n            switch (JSON.parse(action).message) {\r\n                case 'music-controls-next':\r\n                    // Do something\r\n                    break;\r\n                case 'music-controls-previous':\r\n                    // Do something\r\n                    break;\r\n                case 'music-controls-pause':\r\n                    {\r\n                        fthis.state.playerLoaded ?\r\n                            window.media.pause()\r\n                            : console.log('המתן לסיום הטעינה');\r\n                        break;\r\n                    }\r\n                case 'music-controls-media-button-play-pause':\r\n                    {\r\n                        fthis.state.playerLoaded ?\r\n                            fthis.state.playerPlay ? window.media.pause() : window.media.play()\r\n                            : console.log('המתן לסיום הטעינה')\r\n                        break;\r\n                    }\r\n                case 'music-controls-toggle-play-pause':\r\n                    {\r\n                        fthis.state.playerLoaded ?\r\n                            window.media.pause()\r\n                            : console.log('המתן לסיום הטעינה');\r\n                        break;\r\n                    }\r\n                case 'music-controls-play':\r\n                    {\r\n                        fthis.state.playerLoaded ?\r\n                            window.media.play()\r\n                            : console.log('המתן לסיום הטעינה');\r\n                        break;\r\n                    }\r\n                case 'music-controls-media-button-previous':\r\n                    fthis.setState({\r\n                        playerTime: 0\r\n                    });\r\n                    break;\r\n                case 'music-controls-media-button-next':\r\n                    fthis.setState({\r\n                        playerTime: (fthis.state.playerTime + 10000)\r\n                    });\r\n                    break;\r\n                case 'music-controls-destroy':\r\n                    console.log(\"145 music-controls-destroy in and start \");\r\n                    fthis.setState({\r\n                        playerPlay: false\r\n                        , playerLoaded: true\r\n                        , playerTime: 0\r\n                        , playerOpen: false\r\n                        // , playerMusicControls: false\r\n                        // , playerHistory: false\r\n                    });\r\n                    fthis.props.myApp.setState({ playerOpen: false });\r\n                    window.MusicControls.destroy(() => {\r\n                        console.log('155 MusicControls destroy:  ');\r\n                        if (fthis.state.playerLoaded) {\r\n                            if (fthis.state.playerMusicControls) {\r\n                                fthis.setState({ playerMusicControls: false });\r\n                                playItem.isLive ? window.media.pause() : window.media.stop();\r\n                            }\r\n                        }\r\n                    }, (e) => { console.log('destry onError: ', e); });\r\n                    //  }\r\n                    break;\r\n\r\n                // // External controls (iOS only)\r\n                // case 'music-controls-toggle-play-pause':\r\n                //   // Do something\r\n                //   break;\r\n                case 'music-controls-seek-to':\r\n                    const seekToInSeconds = JSON.parse(action).position;\r\n                    window.MusicControls.updateElapsed({\r\n                        elapsed: seekToInSeconds,\r\n                        isPlaying: true\r\n                    });\r\n                    fthis.setState({\r\n                        playerTime: (seekToInSeconds * 1000)\r\n                    });\r\n                    break;\r\n\r\n                // Headset events (Android only)\r\n                // All media button events are listed below\r\n                case 'music-controls-media-button':\r\n                    // Do something\r\n                    break;\r\n                case 'music-controls-headset-unplugged':\r\n                    // Do something\r\n                    break;\r\n                case 'music-controls-headset-plugged':\r\n                    // Do something\r\n                    break;\r\n                case 'music-controls-stop-listening':\r\n                    // console.log('music-controls-stop-listening start');\r\n                    //  localStorage.removeItem(\"playerHistory\");\r\n\r\n                    // fthis.setState({\r\n                    //   playerPlay: false\r\n                    //   , playerLoaded: true\r\n                    //   , playerTime: 0\r\n                    //   // , playerOpen: false\r\n                    // });\r\n                    //   console.log('music-controls-stop-listening End');\r\n                    break\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n\r\n        // Start listening for events\r\n        // The plugin will run the events function each time an event is fired\r\n        window.MusicControls.listen();\r\n\r\n        fthis.MusicControls = window.MusicControls;\r\n        fthis.beforCreateNewMedia(playItem);\r\n    }\r\n    // playerPlayExists() {\r\n    //   window.media.play();\r\n    // }\r\n    // playerPause() {\r\n    // window.media.pause();\r\n    // }\r\n    // playerStop() {\r\n    // window.media.stop();\r\n    // }\r\n    beforCreateNewMedia(playItem) {\r\n        const fthis = this;\r\n        fthis.setState({ playerWaitingToPlay: true });\r\n        if (window.media !== undefined) {\r\n            if (playItem.isLive) {\r\n                console.log(\"isLive\");\r\n                // fthis.setState({ playerMusicControls: false });\r\n                // fthis.MusicControls.destroy();\r\n                window.media.pause();\r\n                window.media.release();\r\n                window.media.play();\r\n            } else {\r\n                console.log(\"!isLive\");\r\n                window.media.stop();\r\n                window.media.src = playItem.show_clip_id_full_url;\r\n                window.media.play();\r\n            }\r\n\r\n\r\n            // window.media = undefined;\r\n            // console.log('window.media !== undefined')\r\n            // clearInterval(interval);\r\n            // //   async function() {\r\n            // // window.media.stop();\r\n\r\n            // console.log('release wiil start');\r\n            //  window.media.release();\r\n            // console.log('play will start');\r\n\r\n            // //   }\r\n\r\n\r\n        } else fthis.createNewMedia(playItem);\r\n    }\r\n\r\n\r\n    createNewMedia(playItem) {\r\n        const fthis = this;\r\n        console.log(\"new window.Media\");\r\n        window.media = new window.Media(playItem.show_clip_id_full_url\r\n            , function () {\r\n                console.log('234 mediaSuccess');\r\n                // if (fthis.state.playerHistory !== false) {\r\n                //   fthis.setState({\r\n                //     playItem:fthis.state.playerHistory.item\r\n                //     ,playerTime: fthis.state.playerHistory.time\r\n                //   });\r\n                // }\r\n            }\r\n            , function (mediaError) {\r\n                // console.log(\"string\" + (mediaError.code === \"-2147483648\"));\r\n                // console.log(\"int\" + (mediaError.code === -2147483648));\r\n                // if (mediaError.code !== -2147483648) {\r\n\r\n                clearInterval(interval);\r\n                localStorage.removeItem(\"playerHistory\");\r\n                if (fthis.state.playerMusicControls)\r\n                    window.MusicControls.updateIsPlaying(false);\r\n                console.log('242 mediaError:' + JSON.stringify(mediaError));\r\n                // }\r\n                fthis.setState({\r\n                    intervalTryFixError: setInterval(() => {\r\n                        if (fthis.state.onErrorTryAgain <= 4) {\r\n                            fthis.setState({ playerError: false, playerLoaded: false, onErrorTryAgain: fthis.state.onErrorTryAgain + 1 });\r\n                            window.media.release();\r\n                            window.media.play();\r\n\r\n                        } else {\r\n                            clearInterval(fthis.state.intervalTryFixError);\r\n                            fthis.setState({ playerError: true, playerLoaded: true });\r\n                        }\r\n                    }, 1000)\r\n                });\r\n            }\r\n            , function (mediaStatus) {\r\n                console.log('244 mediaStatus:' + JSON.stringify(mediaStatus));\r\n                if (mediaStatus === 4)//stop\r\n                {\r\n                    window.media.release();\r\n                    console.log('248 start media.stop (option 4)');\r\n                    clearInterval(interval);\r\n                    //  localStorage.removeItem(\"playerHistory\");\r\n                    if (fthis.state.playerMusicControls) {\r\n                        fthis.setState({ playerMusicControls: false });\r\n                        fthis.MusicControls.destroy();\r\n                        // window.MusicControls.updateIsPlaying(false);\r\n                    }\r\n\r\n                    // if (!fthis.state.playerItem.isLive) {\r\n                    //     localStorage.setItem(\"playerHistory\",\r\n                    //         JSON.stringify({\r\n                    //             item: fthis.state.playerItem\r\n                    //             , time: fthis.state.playerTime\r\n                    //         })\r\n                    //     );\r\n                    // } else {\r\n                    //     //  console.log(\"(else)==> in if palyerTime > show_length.\");\r\n                    //     localStorage.removeItem(\"playerHistory\");\r\n\r\n                    //     // fthis.setState({\r\n                    //     //   playerPlay: false\r\n                    //     //   , playerLoaded: true\r\n                    //     //   , playerTime: 0\r\n                    //     //   , playerOpen: false\r\n                    //     // });\r\n                    // }\r\n\r\n                }\r\n                else if (mediaStatus === 3) {//pause\r\n                    // $('.player_button').css('-webkit-animation', '');\r\n                    // $('.player_button').css('animation', '');\r\n                    fthis.setState({\r\n                        playerPlay: false\r\n                        , playerLoaded: true\r\n                        , playerError: false\r\n                    });\r\n                    clearInterval(interval);\r\n                    localStorage.removeItem(\"playerHistory\");\r\n                    if (fthis.state.playerMusicControls)\r\n                        window.MusicControls.updateIsPlaying(false);\r\n                }\r\n                else if (mediaStatus === 2) {//play\r\n                    // $('.player_button').css('-webkit-animation', '');\r\n                    // $('.player_button').css('animation', '');\r\n                    if (fthis.state.intervalTryFixError) {\r\n                        clearInterval(fthis.state.intervalTryFixError);\r\n                        fthis.setState({ playerError: false, playerLoaded: true, intervalTryFixError: false });\r\n                    }\r\n                    fthis.setState({\r\n                        playerPlay: true\r\n                        , playerLoaded: true\r\n                        , playerError: false\r\n                    });\r\n                    fthis.setIntervalTimePlayer();\r\n                    fthis.setState({ playerMusicControls: true });\r\n                    if (fthis.state.playerMusicControls) {\r\n                        //  console.log(\"fthis.state.playerMusicControls===true\");\r\n                        window.MusicControls.updateIsPlaying(true);\r\n                    } //else console.log(\"fthis.state.playerMusicControls===false\");\r\n\r\n                }\r\n                else if (mediaStatus === 1) {\r\n                    if (fthis.state.playerWaitingToPlay) {\r\n                        window.media.play();\r\n                        fthis.setState({ playerWaitingToPlay: false });\r\n                    }\r\n                    // fthis.setState({\r\n                    //     playerLoaded: true\r\n                    //     , playerError: false\r\n                    // });\r\n                }\r\n            }\r\n\r\n        );\r\n\r\n        //}\r\n        fthis.media = window.media;\r\n\r\n        if (fthis.state.playerHistory !== false) {\r\n\r\n            window.media.seekTo(fthis.state.playerHistory.time);\r\n\r\n            // $('.player_button').css('-webkit-animation', '');\r\n            // $('.player_button').css('animation', '');\r\n\r\n            fthis.setState({\r\n                playItem: fthis.state.playerHistory.item\r\n                , playerTime: fthis.state.playerHistory.time\r\n                , playerPlay: false\r\n                , playerLoaded: true\r\n                , playerError: false\r\n                , playerMusicControls: true\r\n            });\r\n\r\n            fthis.setState({\r\n                playerHistory: false\r\n            });\r\n            //  window.media.pause();\r\n        } else {\r\n            window.media.play();\r\n        }\r\n\r\n    }\r\n\r\n    playerTouchEnd() {\r\n        this.setState({ playerSeekingTouchDown: false });\r\n        console.log('onTouchEnd');\r\n\r\n        if (!this.playerTouchStartMove) {\r\n            const newPositionPercent = (this.playerTouchStartPosition - $($('.player_seeking_bar')).offset().left) / (\r\n                (parseInt($('.player_seeking_bar').css('width').substring(0, $('.player_seeking_bar').css('width').indexOf(\"px\")))));\r\n\r\n            const show_length = ((parseFloat(this.state.playerItem.show_length.substring(0, 2)) * 60 * 60)\r\n                + (parseFloat(this.state.playerItem.show_length.substring(3, 5) * 60)\r\n                    + parseFloat(this.state.playerItem.show_length.substring(6, 9)))\r\n            ) * 1000;\r\n\r\n            const newTime = show_length * newPositionPercent;\r\n            if (newTime <= show_length && newTime >= 0) {\r\n                this.setState({\r\n                    playerTime: newTime\r\n                });\r\n            }\r\n        }\r\n\r\n        this.playerTouchStartMove = false;\r\n\r\n\r\n        window.media.seekTo(this.state.playerTime);\r\n\r\n        // const newPositionPercent = Math.round(($('.player_seeking_bul')[0].offsetLeft) / (parseInt($('.player_info_group').css('width').substring(0, $('.player_info_group').css('width').indexOf(\"px\")))) * 100);\r\n\r\n        // this.setState({\r\n        //   playerTime: (\r\n        //     (parseFloat(this.state.playerItem.show_length.substring(0, 2)) * 60 * 60)\r\n        //     + (parseFloat(this.state.playerItem.show_length.substring(3, 5) * 60)\r\n        //       + parseFloat(this.state.playerItem.show_length.substring(6, 9)))\r\n        //   ) * (newPositionPercent / 100)\r\n        // });\r\n    }\r\n    playerTouchMove(event) {\r\n        this.playerTouchStartMove = true;\r\n        const newPositionPercent = (event.touches[0].clientX - this.playerTouchStartPosition) / (\r\n            (parseInt($('.player_info_group').css('width').substring(0, $('.player_info_group').css('width').indexOf(\"px\")))));\r\n        // console.log('x:', event.touches[0].clientX, ' y:', event.touches[0].clientY)\r\n        const show_length = ((parseFloat(this.state.playerItem.show_length.substring(0, 2)) * 60 * 60)\r\n            + (parseFloat(this.state.playerItem.show_length.substring(3, 5) * 60)\r\n                + parseFloat(this.state.playerItem.show_length.substring(6, 9)))\r\n        ) * 1000;\r\n        const newTime = show_length * newPositionPercent + this.state.playerTime;\r\n        if (newTime <= show_length && newTime >= 0) {\r\n            this.setState({\r\n                playerTime: newTime\r\n            });\r\n            this.playerTouchStartPosition = event.touches[0].clientX;\r\n        }\r\n        else {\r\n            if (newTime >= show_length) {\r\n                this.setState({\r\n                    playerTime: show_length - 1000\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    playerTime: 1000\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    setIntervalTimePlayer() {\r\n        // debugger\r\n        let fthis = this;\r\n        interval = setInterval(function () {\r\n            if (!fthis.state.playerItem.isLive) {\r\n                if (fthis.state.playerTime / 1000 <= (\r\n                    (parseFloat(fthis.state.playerItem.show_length.substring(0, 2)) * 60 * 60)\r\n                    + (parseFloat(fthis.state.playerItem.show_length.substring(3, 5) * 60)\r\n                        + parseFloat(fthis.state.playerItem.show_length.substring(6, 9)))\r\n                )) {\r\n                    localStorage.setItem(\"playerHistory\",\r\n                        JSON.stringify({\r\n                            item: fthis.state.playerItem\r\n                            , time: fthis.state.playerTime\r\n                        })\r\n                    );\r\n                    fthis.setState({\r\n                        playerTime: fthis.state.playerTime + 100\r\n                    });\r\n                } else {\r\n                    clearInterval(interval);\r\n                    localStorage.removeItem(\"playerHistory\");\r\n                    //window.media.pause();\r\n                    //window.media.stop();\r\n                    //הקטע הסתיים\r\n                    console.log('updateIsPlaying=>false from setIntervalTimePlayer (else)')\r\n                    window.MusicControls.updateIsPlaying(false);\r\n\r\n                }\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n\r\n    componentWillMount() {\r\n        // const fthis = this;\r\n\r\n        if (this.state.playerHistory !== false) {\r\n            this.playerPlayNew(this.state.playerHistory.item);\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const fthis = this;\r\n        let bottom_Height = this.props.bottom_Height;\r\n\r\n        // if(fthis.state.playerError){\r\n        //     window.media.release();\r\n        //     window.media.play();\r\n        // }\r\n\r\n        return (\r\n            //* //--footer player--// */\r\n            fthis.state.playerItem !== null ?\r\n                <div key=\"player_section\" className=\"player_section\" style={{ height: bottom_Height + \"px\", display: fthis.myApp.state.playerOpen ? \"flex\" : \"none\" }}>\r\n                    {!fthis.state.playerItem.isLive ?\r\n                        <div className=\"player_info_group\" onTouchMove={(event) => fthis.playerTouchMove(event)}\r\n                            onTouchEnd={(event) => { fthis.playerTouchEnd(); }}\r\n                            onTouchStart={(event) => { fthis.playerTouchStartPosition = event.touches[0].clientX; fthis.setState({ playerSeekingTouchDown: true }); console.log('onTouchStart'); }}>\r\n                            <div>{fthis.state.playerItem.show_name}</div>\r\n                            <div className=\"player_seeking_bar\">\r\n                                <div className=\"player_seeking_line\" style={{\r\n                                    width: ((fthis.state.playerTime / 1000) / (\r\n                                        (parseFloat(fthis.state.playerItem.show_length.substring(0, 2)) * 60 * 60)\r\n                                        + (parseFloat(fthis.state.playerItem.show_length.substring(3, 5) * 60)\r\n                                            + parseFloat(fthis.state.playerItem.show_length.substring(6, 9)))\r\n                                    ) * 100).toString() + \"%\"\r\n                                }} />\r\n                                <div className=\"player_seeking_bul\"\r\n                                    // onTouchMove={(event) => fthis.playerTouchMove(event)}\r\n                                    // onTouchStart={(event) => { fthis.playerTouchStartPosition = event.touches[0].clientX; fthis.setState({ playerSeekingTouchDown: true }); console.log('onTouchStart'); }}\r\n                                    // onTouchEnd={() => { fthis.playerTouchEnd(); }}\r\n                                    style={{\r\n                                        marginLeft: ((fthis.state.playerTime / 1000) / (\r\n                                            (parseFloat(fthis.state.playerItem.show_length.substring(0, 2)) * 60 * 60)\r\n                                            + (parseFloat(fthis.state.playerItem.show_length.substring(3, 5) * 60)\r\n                                                + parseFloat(fthis.state.playerItem.show_length.substring(6, 9)))\r\n                                        ) * 100).toString() + \"%\"\r\n                                        , width: fthis.state.playerSeekingTouchDown ? '7.0vw' : '2.8vw'\r\n                                        , height: fthis.state.playerSeekingTouchDown ? '7.0vw' : '2.8vw'\r\n                                    }} />\r\n                            </div>\r\n                            <div>\r\n                                <div style={{ display: \"inline-block\" }}>{\r\n                                    (((Math.floor((fthis.state.playerTime / (60 * 60 * 1000)) % 60)) <= 9\r\n                                        ? (\"0\" + (Math.floor((fthis.state.playerTime / (60 * 60 * 1000)) % 60).toString()))\r\n                                        : (Math.floor((fthis.state.playerTime / (60 * 60 * 1000)) % 60)).toString()\r\n                                    ) + \":\"\r\n                                    )\r\n                                    + ((Math.floor((fthis.state.playerTime / (60 * 1000)) % 60)) <= 9\r\n                                        ? (\"0\" + (Math.floor((fthis.state.playerTime / (60 * 1000)) % 60)).toString())\r\n                                        : (Math.floor((fthis.state.playerTime / (60 * 1000)) % 60)).toString()\r\n                                    )\r\n                                    + \":\"\r\n                                    + ((Math.floor((fthis.state.playerTime / 1000) % 60)) <= 9\r\n                                        ? (\"0\" + (Math.floor((fthis.state.playerTime / 1000) % 60)).toString())\r\n                                        : (Math.floor((fthis.state.playerTime / 1000) % 60)).toString()\r\n                                    )\r\n                                }</div>\r\n                                <div style={{ display: \"inline-block\" }}>/</div>\r\n                                <div style={{ display: \"inline-block\" }}>{fthis.state.playerItem.show_length}</div>\r\n                            </div>\r\n\r\n                        </div>\r\n                        : <div className=\"player_info_group\"><div>{fthis.state.playerItem.show_name}</div></div>\r\n                    }\r\n                    <div onClick={() => {\r\n                        if (fthis.state.playerError) {\r\n                            window.media.release();\r\n                            window.media.play();\r\n                        } else if (fthis.state.playerLoaded) {\r\n                            fthis.state.playerPlay ? window.media.pause() : window.media.play()\r\n                        }\r\n                    }}\r\n                        style={\r\n                            fthis.state.playerLoaded\r\n                                ? {\r\n                                    '-webkit-animation': ''\r\n                                    , 'animation': ''\r\n                                }\r\n                                : {\r\n                                    '-webkit-animation': 'spin 2s linear infinite'\r\n                                    , 'animation': 'spin 2s linear infinite;'\r\n                                }\r\n                        }\r\n                        className={fthis.state.playerPlay ? \"player_button pause w-inline-block\" : \"player_button w-inline-block\"}>\r\n                        <img src={fthis.state.playerError ? \"./images/warning-sign.png\" : fthis.state.playerPlay ? \"./images/ic_pause_blue.svg\" : \"./images/ic_play_blue.svg\"}\r\n                            alt={fthis.state.playerPlay ? \"puse Player\" : \"play Player\"} />\r\n                    </div>\r\n                    {/* <div className=\"player_video_icon\"><img src=\"images/video.svg\" alt=\"\" /></div> */}\r\n                </div>\r\n                : null\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}